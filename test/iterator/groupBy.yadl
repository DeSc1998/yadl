// RUN: DEFAULT
numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
is_even = (n) => n % 2 == 0

next = (data) => {
    if (data['index'] < len(data['list'])) {
        data['index'] = data['index'] + 1
        return data['list'][ data['index'] - 1 ]
    } else {
        return none
    }
}
has_next = (data) => data['index'] < len(data['list'])
d = {
   'index': 0,
   'list': numbers
}

iter = groupBy(iterator(next, has_next, d), is_even)

while (has_next(iter)) {
    print(next(iter))
}
// TODO: what should the groupBy-iterator return for elements?
// CHECK-OUT: {false: [1, 3, 5, 7, 9], true: [2, 4, 6, 8, 10]}
